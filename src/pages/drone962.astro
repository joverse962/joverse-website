---
import Layout from '../layouts/Layout.astro';
import Header from '../components/Header.jsx';
import Footer from '../components/Footer.astro';
import TuiCarousel from '../components/TuiCarousel.jsx'; 

// Hardware Components Data
// Mapped to 'title' so it works with the TuiCarousel component
const hardwareStack = [
    { 
        title: 'ESP32 WROOM', 
        img: '/drone962/esp.png', 
        desc: 'Dual-core microcontroller handling PID loops and Wi-Fi telemetry.' 
    },
    { 
        title: 'ESP32 Camera', 
        img: '/drone962/esp-cam.png', 
        desc: 'Compact camera module for live visual feedback and recording.' 
    },
    { 
        title: 'MPU6050',
        img: '/drone962/gyro.png', 
        desc: '6-Axis Gyroscope & Accelerometer for real-time stabilization.' 
    },
    { 
        title: 'MX1508 Driver',
        img: '/drone962/motor-drive.png', 
        desc: 'Mini Dual H-Bridge PWM Motor Drive. More efficient than L298N.' 
    },
    { 
        title: 'Coreless Motors',
        img: '/drone962/motor.png',
        desc: 'High-RPM brushed DC motors for the 3-inch lightweight frame.' 
    },
    { 
        title: '3.7v LiPo Battery',
        img: '/drone962/battery.png',
        desc: 'High-discharge power source optimized for 3-inch frames.' 
    },
];

// Key Features (Renamed and Refocused)
const features = [
    { 
        title: "Raw C++ Autonomy", 
        desc: "No pre-made flight controllers. We wrote the PID logic and sensor fusion algorithms from scratch to ensure total software control." 
    },
    { 
        title: "Integrated Vision", 
        desc: "Equipped with an onboard camera module to capture aerial footage and support future computer vision tasks." 
    },
    { 
        title: "Featherweight Design", 
        desc: "Optimized 3-inch frame with light components to maximize thrust-to-weight ratio and battery efficiency." 
    }
];

// Gallery Data
const gallery = [
    {
        title: "The AirVerse Setup",
        desc: "The drone displayed alongside the software control interface at the Maker Collective event.",
        img: "/drone962/dr2.jpg"
    },
    {
        title: "Top-Down Engineering",
        desc: "A clear view of the custom 3D printed frame (SHLTHS) and wire management.",
        img: "/drone962/dr7.jpg"
    },
    {
        title: "Landing Gear & Mount",
        desc: "Custom landing skids and sensor mounting bracket for stable takeoffs.",
        img: "/drone962/dr1.jpg"
    },
    {
        title: "Event Showcase",
        desc: "Ready for demonstration at the foundation event.",
        img: "/drone962/dr4.jpg"
    }
];
---

<Layout title="Drone962 | JOVERSE">
    <Header client:load/>
    <main class="mt-10 px-4 max-w-screen-2xl mx-auto font-bungee">

        <section class="relative mb-24 rounded-3xl text-ink-black overflow-hidden h-[70vh] flex flex-col items-center justify-center text-center p-6 border border-cool-sky/20 shadow-2xl group">
            
            <div class="absolute inset-0 z-0">
                <img src="/drone962/dr7.jpg" alt="Drone962 Background" class="w-full h-full object-cover opacity-80 group-hover:opacity-60 transition-opacity duration-700" />
                <div class="absolute inset-0 bg-gradient-to-t from-ink-black via-ink-black/40 to-ink-black/50"></div>
            </div>
            
            <div class="z-10 space-y-6 relative">
                <div class="inline-block px-4 py-1 rounded-full border border-icy-aqua/50 text-icy-aqua text-xs font-mono bg-icy-aqua/10 backdrop-blur-md mb-4">
                    v1.0 PROTOTYPE // ARDUINO C++
                </div>
                <h1 class="text-4xl md:text-8xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-hippie-blue to-crail drop-shadow-lg">
                    drone962
                </h1>
                <p class="text-azure-mist max-w-3xl mx-auto font-light text-lg md:text-2xl leading-relaxed drop-shadow-md">
                    Autonomous 3-inch micro-drone powered by custom ESP32 flight controller logic.
                </p>
                <div class="flex flex-col md:flex-row gap-4 justify-center mt-8">
                    <a href="#hardware" class="px-8 py-4 bg-crail text-ink-black rounded-xl hover:bg-crail transition-colors font-bold flex items-center justify-center gap-2 group-hover:shadow-[0_0_20px_rgba(196,101,65,0.4)]">
                        Explore Hardware
                    </a>
                    <a href="#drone-preview" class="px-8 py-4 border border-white/50 text-white rounded-xl hover:bg-white/10 transition-colors font-bold backdrop-blur-sm">
                        Watch Flight
                    </a>
                </div>
            </div>
        </section>

        {/* Concept Section - Removed Flight Logic Loop & Centered Text */}
        <section class="mb-32 max-w-4xl mx-auto text-center space-y-12">
            <div>
                <h2 class="text-3xl font-bold mb-4 text-ink-black inline-block border-b-4 border-cool-sky pb-2">The Concept</h2>
                <p class="text-lg opacity-80 leading-relaxed text-ink-black">
                    Commercial drones are "black boxes." <strong>Drone962</strong> strips away the pre-made flight controllers. It is a project to build an autonomous flight system from scratch using raw C++ code on the Arduino IDE, handling everything from sensor fusion to motor mixing manually.
                </p>
            </div>
            
            <div>
                <h2 class="text-3xl font-bold mb-4 text-ink-black inline-block border-b-4 border-icy-aqua pb-2">Engineering Goal</h2>
                <p class="text-lg opacity-80 leading-relaxed text-ink-black">
                    To prove that complex flight stability logic can be achieved on affordable, general-purpose hardware (ESP32) without relying on dedicated flight controller boards like Betaflight or Pixhawk.
                </p>
            </div>
        </section>
        {/* bg-gradient-to-r from-cool-sky via-ink-black to-icy-aqua */}
        {/* Hardware Section - Switched to TuiCarousel */}
        <section id="hardware" class="mb-32 bg-gradient-to-r from-Woodsmoke via-crail to-Woodsmoke py-10 rounded-2xl shadow-2xl">
            <div class="text-center mb-12">
                <h2 class="text-3xl font-bold text-ink-black">Hardware Manifest</h2>
                <p class="text-ink-black opacity-60">The components powering the system.</p>
            </div>
            
            <div class="flex flex-wrap justify-center gap-6">
                {hardwareStack.map((item) => (
                    <div class="
                        group relative 
                        w-[220px] flex flex-col items-center 
                        bg-ink-black rounded-2xl p-4 
                        border border-cool-sky/10 shadow-lg 
                        hover:border-cool-sky/50 hover:shadow-[0_0_15px_rgba(0,255,255,0.15)] 
                        transition-all duration-300
                    ">
                        {/* Image Container: White BG added to handle transparent images */}
                        <div class="
                            w-full aspect-square mb-4 
                            bg-white rounded-xl 
                            flex items-center justify-center 
                            p-2 overflow-hidden
                        ">
                            <img 
                                src={item.img} 
                                alt={item.title} 
                                class="w-full h-full object-contain group-hover:scale-110 transition-transform duration-300" 
                            />
                        </div>

                        <h3 class="text-white font-bold text-sm mb-2 text-center uppercase tracking-wide">
                            {item.title}
                        </h3>
                        
                        <p class="text-[10px] text-gray-400 text-center leading-relaxed">
                            {item.desc}
                        </p>
                    </div>
                ))}
            </div>
        </section>

        {/* Features Section - Updated Content */}
        <section class="mb-32 md:mr-20">
            <div class="grid md:grid-cols-2 gap-12 items-center">
                
                <div class="relative group flex justify-center">
                    <div class="relative z-10 p-2 bg-white rounded-2xl shadow-2xl border border-gray-200">
                        <img src="/drone962/dr5.jpg" alt="Drone Build" class="rounded-xl max-h-[600px] hover:scale-105 transition duration-500" />
                        <div class="absolute bottom-4 left-4 bg-ink-black/80 text-white text-xs px-2 py-1 rounded">CUSTOM BUILD</div>
                    </div>
                    <div class="absolute inset-0 bg-cool-sky/20 blur-3xl rounded-full transform scale-75 z-0"></div>
                </div>

                <div class="space-y-6">
                    <h2 class="text-3xl font-bold text-ink-black">Why It's Special</h2>
                    <p class="text-lg opacity-70 text-ink-black">
                        Drone962 isn't just about flying; it's about understanding the physics and code behind the flight.
                    </p>
                    <div class="space-y-4">
                        {features.map((f) => (
                            <div class="p-4 bg-white border-l-4 border-cool-sky shadow-md rounded-r-lg hover:bg-cool-sky/5 transition-colors">
                                <h4 class="font-bold text-ink-black">{f.title}</h4>
                                <p class="text-sm opacity-70 text-ink-black">{f.desc}</p>
                            </div>
                        ))}
                    </div>
                </div>
            </div>
        </section>

        {/* NEW SECTION: Drone Body / Airframe Design */}
        <section class="mb-32 relative">
            {/* Background decorative element */}
            <div class="absolute -top-10 -right-10 w-64 h-64 bg-icy-aqua/10 rounded-full blur-3xl -z-10"></div>

            <div class="bg-Woodsmoke rounded-3xl p-8 md:p-12 border border-cool-sky/20 shadow-2xl overflow-hidden relative group">
                {/* Grid Layout */}
                <div class="grid md:grid-cols-2 gap-12 items-center relative z-10">
                    
                    {/* Text Content */}
                    <div class="space-y-6">
                        <div class="inline-block px-3 py-1 border border-crail rounded-full text-crail text-xs font-mono mb-2">
                            ADDITIVE MANUFACTURING
                        </div>
                        <h2 class="text-3xl md:text-4xl font-bold text-white">
                            The Airframe: <span class="text-transparent bg-clip-text bg-gradient-to-r from-icy-aqua to-crail">SHLTHS v1</span>
                        </h2>
                        <p class="text-gray-400 leading-relaxed">
                            The chassis is a custom unibody design fabricated at the <strong>Makers Space</strong>. Unlike standard carbon fiber plates, this frame utilizes the geometric freedom of 3D printing to create a rigid, vibration-dampening protective shell.
                        </p>

                        <ul class="space-y-4 mt-4">
                            <li class="flex items-start gap-3">
                                <span class="text-icy-aqua mt-1">▹</span>
                                <div>
                                    <strong class="text-white block">Material: Industrial ABS</strong>
                                    <span class="text-sm text-gray-500">Printed at high temperatures for maximum impact resistance and heat tolerance.</span>
                                </div>
                            </li>
                            <li class="flex items-start gap-3">
                                <span class="text-icy-aqua mt-1">▹</span>
                                <div>
                                    <strong class="text-white block">Geometry: 3-Inch Micro Class</strong>
                                    <span class="text-sm text-gray-500">Calculated specifically for 3" propellers to ensure zero drag and optimal thrust lines.</span>
                                </div>
                            </li>
                            <li class="flex items-start gap-3">
                                <span class="text-icy-aqua mt-1">▹</span>
                                <div>
                                    <strong class="text-white block">Rapid Prototyping</strong>
                                    <span class="text-sm text-gray-500">Iterated directly at the Makers Space, allowing for same-day design adjustments.</span>
                                </div>
                            </li>
                        </ul>
                    </div>

                    {/* Image Placeholders Grid */}
                    <div class="grid grid-cols-2 gap-4 h-full">
                        {/* Main Tall Image Placeholder */}
                        <div class="col-span-2 md:col-span-1 md:row-span-2 h-64 md:h-auto bg-white/5 border border-white/10 rounded-xl flex items-center justify-center relative overflow-hidden group-hover:border-cool-sky/30 transition-colors">
                            {/* REPLACE THE SRC BELOW WITH YOUR IMAGE */}
                            <img src="/body.jpg" onerror="this.style.display='none'" class="absolute inset-0 w-full h-full object-cover" />
                            <span class="text-cool-sky/50 text-xs font-mono">IMG_MAIN_PLACEHOLDER</span>
                        </div>

                        {/* Top Right Small Placeholder */}
                        <div class="h-48 bg-white/5 border border-white/10 rounded-xl flex items-center justify-center relative overflow-hidden group-hover:border-cool-sky/30 transition-colors">
                            {/* REPLACE THE SRC BELOW WITH YOUR IMAGE */}
                            <img src="/drone962/view.png" onerror="this.style.display='none'" class="absolute inset-0 w-full h-full object-cover" />
                            <span class="text-cool-sky/50 text-xs font-mono">IMG_DETAIL_1</span>
                        </div>

                        {/* Bottom Right Small Placeholder */}
                        <div class="h-48 bg-white/5 border border-white/10 rounded-xl flex items-center justify-center relative overflow-hidden group-hover:border-cool-sky/30 transition-colors">
                            {/* REPLACE THE SRC BELOW WITH YOUR IMAGE */}
                            <img src="/drone962/3d-design.png" onerror="this.style.display='none'" class="absolute inset-0 w-full h-full object-cover" />
                            <span class="text-cool-sky/50 text-xs font-mono">IMG_DETAIL_2</span>
                        </div>
                    </div>

                </div>
            </div>
        </section>

        {/* System Check updated to Drone Preview */}
        <section id="drone-preview" class="mb-32 space-y-12">
            <div class="text-center mb-12">
                <h2 class="text-4xl font-bold text-ink-black">Drone Preview</h2>
                <p class="text-ink-black opacity-60">
                    Showcased at <strong>Makers Collective 2025</strong>.
                </p>
            </div>

            <div class="max-w-sm mx-auto group relative rounded-3xl overflow-hidden border border-cool-sky/30 shadow-2xl bg-ink-black aspect-[9/16]">
                <div class="absolute top-4 left-4 z-10 px-3 py-1 bg-ink-black/80 backdrop-blur border border-cool-sky/50 rounded-lg text-cool-sky text-sm font-mono">
                    MAKERS_COLLECTIVE_2025
                </div>
                <video autoplay loop muted playsinline class="w-full h-full object-cover">
                    <source src="/drone962/dr-vid3.MOV" type="video/mp4" />
                    Your browser does not support the video tag.
                </video>
            </div>
        </section>

        <section class="mb-32">
            <div class="text-center mb-12">
                <h2 class="text-4xl font-bold text-ink-black">Project Gallery</h2>
                <p class="text-ink-black opacity-60">From prototyping to the Maker Collective exhibition.</p>
            </div>
            
            <TuiCarousel slides={gallery} client:visible />
        </section>

        <Footer />
    </main>
</Layout>